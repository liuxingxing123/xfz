function News(){this.progressGroup=$("#progress-group")}News.prototype.run=function(){this.initUEditor(),this.listenQIniuUploadFileEvent(),this.listenSubmitEvent()},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var e=n[0].files[0],t=new FormData;t.append("file",e),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenQIniuUploadFileEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var r=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=$(".progress-bar");t.css({width:"0%"}),t.text("0%");var n=e.data.token,o=(new Date).getTime()+"."+r.name.split(".")[r.name.split(".").length-1],i={fname:o,params:{},mimeType:["image/png","image/jpeg","image/gif","video/x-ms-wmv"]},a={useCdnDomain:!0,retryCount:6,region:qiniu.region.z2};qiniu.upload(r,o,n,i,a).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";News.progressGroup.show();var n=$(".progress-bar");n.css({width:t}),n.text(t)},News.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message),$("#progress-group").hide(),console.log(e.message)},News.prototype.handleFileUploadComplete=function(e){$("#progress-group").hide();var t="http://pwlbcmhg8.bkt.clouddn.com/"+e.key;$("input[name='thumbnail']").val(t)},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenSubmitEvent=function(){var l=$("#submit-btn");l.click(function(e){e.preventDefault();var t=$("input[name='title']").val(),n=$("select[name='category']").val(),o=$("input[name='desc']").val(),i=$("input[name='thumbnail']").val(),a=window.ue.getContent(),r=l.attr("data-news-id"),s="";s=r?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:s,data:{title:t,category:n,desc:o,thumbnail:i,content:a,pk:r},success:function(e){200===e.code&&xfzalert.alertSuccess(r?"恭喜！新闻编辑成功！":"恭喜！新闻发布成功！",function(){window.location.reload()})}})})},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInRoaXMiLCJwcm9ncmVzc0dyb3VwIiwiJCIsInByb3RvdHlwZSIsInJ1biIsImluaXRVRWRpdG9yIiwibGlzdGVuUUluaXVVcGxvYWRGaWxlRXZlbnQiLCJsaXN0ZW5TdWJtaXRFdmVudCIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsInNlbGYiLCJnZXQiLCJwcm9ncmVzc0JhciIsImNzcyIsIndpZHRoIiwidGV4dCIsInRva2VuIiwia2V5IiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwic3BsaXQiLCJsZW5ndGgiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VDZG5Eb21haW4iLCJyZXRyeUNvdW50IiwicmVnaW9uIiwicWluaXUiLCJ6MiIsInVwbG9hZCIsInN1YnNjcmliZSIsIm5leHQiLCJoYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MiLCJlcnJvciIsImhhbmRsZUZpbGVVcGxvYWRFcnJvciIsImNvbXBsZXRlIiwiaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlIiwicmVzcG9uc2UiLCJwZXJjZW50VGV4dCIsInRvdGFsIiwicGVyY2VudCIsInRvRml4ZWQiLCJzaG93Iiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJoaWRlIiwiY29uc29sZSIsImxvZyIsInVlIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJzdWJtaXRCdG4iLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwicGsiLCJhdHRyIiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsT0FDTEMsS0FBS0MsY0FBZ0JDLEVBQUUsbUJBRzNCSCxLQUFLSSxVQUFVQyxJQUFNLFdBRWpCSixLQUFLSyxjQUNMTCxLQUFLTSw2QkFDTE4sS0FBS08scUJBR1RSLEtBQUtJLFVBQVVLLHNCQUF3QixXQUNuQyxJQUFJQyxFQUFZUCxFQUFFLGtCQUNsQk8sRUFBVUMsT0FBTyxXQUNiLElBQUlDLEVBQU9GLEVBQVUsR0FBR0csTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUckIsRUFBRSxtQkFDUnNCLElBQUlOLFVBT3ZDbkIsS0FBS0ksVUFBVUcsMkJBQTZCLFdBQ3hDLElBQUltQixFQUFPekIsS0FDS0UsRUFBRSxrQkFDUlEsT0FBTyxXQUNiLElBQUlDLEVBQU9YLEtBQUtZLE1BQU0sR0FFdEJJLFFBQVFVLElBQUksQ0FDUlIsSUFBTyxnQkFDUEksUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFXLENBQ3hCLElBQUlJLEVBQWN6QixFQUFFLGlCQUNwQnlCLEVBQVlDLElBQUksQ0FBQ0MsTUFBUyxPQUMxQkYsRUFBWUcsS0FBSyxNQUNqQixJQUFJQyxFQUFRUixFQUFhLEtBQVMsTUFHOUJTLEdBQU0sSUFBS0MsTUFBUUMsVUFBWSxJQUFNdkIsRUFBS3dCLEtBQUtDLE1BQU0sS0FBS3pCLEVBQUt3QixLQUFLQyxNQUFNLEtBQUtDLE9BQVMsR0FDeEZDLEVBQVcsQ0FDWEMsTUFBT1AsRUFDUFEsT0FBUSxHQUNSQyxTQUFVLENBQUMsWUFBYSxhQUFjLFlBQWEsbUJBRW5EQyxFQUFTLENBQ1RDLGNBQWMsRUFDZEMsV0FBWSxFQUNaQyxPQUFRQyxNQUFNRCxPQUFPRSxJQVFSRCxNQUFNRSxPQUFPckMsRUFBTXFCLEVBQUtELEVBQU9PLEVBQVVJLEdBRS9DTyxVQUFVLENBQ2pCQyxLQUFRekIsRUFBSzBCLHlCQUNiQyxNQUFTM0IsRUFBSzRCLHNCQUNkQyxTQUFZN0IsRUFBSzhCLGtDQVN6Q3hELEtBQUtJLFVBQVVnRCx5QkFBMkIsU0FBVUssR0FDaEQsSUFFSUMsRUFGUUQsRUFBU0UsTUFDREMsUUFDTUMsUUFBUSxHQUFLLElBQ3BCN0QsS0FBS0UsY0FDWDRELE9BQ2IsSUFBSWxDLEVBQWN6QixFQUFFLGlCQUNwQnlCLEVBQVlDLElBQUksQ0FBQ0MsTUFBUzRCLElBQzFCOUIsRUFBWUcsS0FBSzJCLElBRXJCMUQsS0FBS0ksVUFBVWtELHNCQUF3QixTQUFVRCxHQUM3Q1UsT0FBT0MsV0FBV0MsVUFBVVosRUFBTWEsU0FDZC9ELEVBQUUsbUJBQ1JnRSxPQUNkQyxRQUFRQyxJQUFJaEIsRUFBTWEsVUFFdEJsRSxLQUFLSSxVQUFVb0QseUJBQTJCLFNBQVVDLEdBQzdCdEQsRUFBRSxtQkFDUmdFLE9BRWIsSUFFSWhELEVBRlMsb0NBQ0VzQyxFQUFTeEIsSUFFSDlCLEVBQUUsMkJBQ1JzQixJQUFJTixJQUd2Qm5CLEtBQUtJLFVBQVVFLFlBQWMsV0FDekJ5RCxPQUFPTyxHQUFLQyxHQUFHQyxVQUFVLFNBQVUsQ0FDL0JDLG1CQUFzQixJQUN0QkMsVUFBYSxzQkFLckIxRSxLQUFLSSxVQUFVSSxrQkFBb0IsV0FDL0IsSUFBSW1FLEVBQVl4RSxFQUFFLGVBQ2xCd0UsRUFBVUMsTUFBTSxTQUFVQyxHQUN0QkEsRUFBTUMsaUJBQ04sSUFBSUMsRUFBUTVFLEVBQUUsdUJBQXVCc0IsTUFDakN1RCxFQUFXN0UsRUFBRSwyQkFBMkJzQixNQUN4Q3dELEVBQU85RSxFQUFFLHNCQUFzQnNCLE1BQy9CeUQsRUFBWS9FLEVBQUUsMkJBQTJCc0IsTUFDekMwRCxFQUFVcEIsT0FBT08sR0FBR2MsYUFFcEJDLEVBQUtWLEVBQVVXLEtBQUssZ0JBQ3BCbkUsRUFBTSxHQUVOQSxFQURBa0UsRUFDTSxrQkFFQSxtQkFFVnBFLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKMkQsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsRUFDWEUsR0FBTUEsR0FFVjlELFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxNQUNiK0QsU0FBU0MsYUFBYUgsRUFBSyxhQUFlLGFBQWMsV0FDcER0QixPQUFPMEIsU0FBU0MsaUJBT3hDdkYsRUFBRSxZQUNhLElBQUlILE1BQ1ZLLE1BRUxMLEtBQUtFLGNBQWdCQyxFQUFFIiwiZmlsZSI6IndyaXRlX25ld3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3cygpIHtcclxuICAgIHRoaXMucHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7XHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIHRoaXMubGlzdGVuVXBsb2FkRmlsZUV2ZW50KClcclxuICAgIHRoaXMuaW5pdFVFZGl0b3IoKTtcclxuICAgIHRoaXMubGlzdGVuUUluaXVVcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuU3VibWl0RXZlbnQoKTtcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoXCIjdGh1bWJuYWlsLWJ0blwiKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xyXG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwgZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IFwiL2Ntcy91cGxvYWRfZmlsZS9cIixcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsLy/lkYror4lqUXVlcnnmiJHov5nkuKrmlofku7bkuI3pnIDopoHlho3ljrvlpITnkIbkuoZcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsLy/kuI3pnIDopoHlho3ljrvmt7vliqBjb250ZW50VHlwZeS6hlxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblFJbml1VXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoXCIjdGh1bWJuYWlsLWJ0blwiKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICAndXJsJzogXCIvY21zL3FudG9rZW4vXCIsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKFwiLnByb2dyZXNzLWJhclwiKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogJzAlJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzQmFyLnRleHQoJzAlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYS5iLmpwZyA9IFsnYScsJ2InLCdqcGcnXVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDE5ODg4ODg4OCArIC4gKyBqcGcgPSAxOTg4ODg4LmpwZ1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbZmlsZS5uYW1lLnNwbGl0KCcuJykubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LC8v5paH5Lu25Y6f5paH5Lu25ZCNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sLy/nlKjmnaXmlL7nva7oh6rlrprkuYnlj5jph49cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvZ2lmJywgJ3ZpZGVvL3gtbXMtd212J10vL21pbWVUeXBlOiBudWxsIHx8IGFycmF577yM55So5p2l6ZmQ5Yi25LiK5Lyg5paH5Lu257G75Z6L77yM5Li6IG51bGwg5pe26KGo56S65LiN5a+55paH5Lu257G75Z6L6ZmQ5Yi277yb6ZmQ5Yi257G75Z6L5pS+5Yiw5pWw57uE6YeM77yaXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsLy/ooajnpLrmmK/lkKbkvb/nlKggY2RuIOWKoOmAn+Wfn+WQje+8jOS4uuW4g+WwlOWAvO+8jHRydWUg6KGo56S65L2/55So77yM6buY6K6k5Li6IGZhbHNl44CCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJ5Q291bnQ6IDYsLy/kvKDoh6rliqjph43or5XmrKHmlbDvvIjmlbTkvZPph43or5XmrKHmlbDvvIzogIzkuI3mmK/mn5DkuKrliIbniYfnmoTph43or5XmrKHmlbDvvInvvJvpu5jorqQgMyDmrKHvvIjljbPkuIrkvKDlpLHotKXlkI7mnIDlpJrph43or5XkuKTmrKHvvInvvJvnm67liY3ku4XlnKjkuIrkvKDov4fnqIvkuK3kuqfnlJ8gNTk5IOWGhemDqOmUmeivr+aXtueUn+aViO+8jOS9huaYr+acquadpeW+iOWPr+iDveS8muaJqeWxleS4uuaUr+aMgeabtOWkmueahOaDheWGteOAglxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBxaW5pdS5yZWdpb24uejA6IOS7o+ihqOWNjuS4nOWMuuWfn1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBxaW5pdS5yZWdpb24uejE6IOS7o+ihqOWNjuWMl+WMuuWfn1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBxaW5pdS5yZWdpb24uejI6IOS7o+ihqOWNjuWNl+WMuuWfn1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBxaW5pdS5yZWdpb24ubmEwOiDku6PooajljJfnvo7ljLrln59cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcWluaXUucmVnaW9uLmFzMDog5Luj6KGo5Lic5Y2X5Lqa5Yy65Z+fXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IHFpbml1LnVwbG9hZChmaWxlLCBrZXksIHRva2VuLCBwdXRFeHRyYSwgY29uZmlnKTtcclxuICAgICAgICAgICAgICAgICAgICAvL29ic2VydmVyIOS4uuS4gOS4qiBvYmplY3TvvIznlKjmnaXorr7nva7kuIrkvKDov4fnqIvnmoTnm5HlkKzlh73mlbDvvIzmnInkuInkuKrlsZ7mgKcgbmV4dOOAgWVycm9y44CBY29tcGxldGU6XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbXBsZXRlJzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkQ29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudDtcclxuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSArICclJztcclxuICAgIHZhciBwcm9jZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9jZXNzR3JvdXAuc2hvdygpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJChcIi5wcm9ncmVzcy1iYXJcIik7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjogcGVyY2VudFRleHR9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpO1xyXG59XHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcclxufVxyXG5OZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkQ29tcGxldGUgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgIHZhciBwcm9jZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG4gICAgcHJvY2Vzc0dyb3VwLmhpZGUoKTtcclxuXHJcbiAgICB2YXIgZG9tYWluID0gJ2h0dHA6Ly9wd2xiY21oZzguYmt0LmNsb3VkZG4uY29tLyc7XHJcbiAgICB2YXIgZmlsZW5hbWUgPSByZXNwb25zZS5rZXk7XHJcbiAgICB2YXIgdXJsID0gZG9tYWluICsgZmlsZW5hbWU7XHJcbiAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbiAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUuaW5pdFVFZGl0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicsIHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuU3VibWl0RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuXHJcbiAgICAgICAgdmFyIHBrID0gc3VibWl0QnRuLmF0dHIoXCJkYXRhLW5ld3MtaWRcIik7XHJcbiAgICAgICAgdmFyIHVybCA9ICcnO1xyXG4gICAgICAgIGlmIChwaykge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy9lZGl0X25ld3MvJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy93cml0ZV9uZXdzLyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAncGsnOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKHBrID8gXCLmga3llpzvvIHmlrDpl7vnvJbovpHmiJDlip/vvIFcIiA6IFwi5oGt5Zac77yB5paw6Ze75Y+R5biD5oiQ5Yqf77yBXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBuZXdzID0gbmV3IE5ld3MoKTtcclxuICAgIG5ld3MucnVuKCk7XHJcblxyXG4gICAgTmV3cy5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XHJcbn0pIl19
