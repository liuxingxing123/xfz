function FrontBase(){}function Auth(){var t=this;t.maskWrapper=$(".mask-wrapper"),t.scrollWrapper=$(".scroll-wrapper"),t.smsCaptcha=$(".sms-captcha-btn")}FrontBase.prototype.run=function(){this.listenAuthHover()},FrontBase.prototype.listenAuthHover=function(){var t=$(".auth-box"),n=$(".user-more-box");t.hover(function(){n.show()},function(){n.hide()})},Auth.prototype.run=function(){this.listenShowHideEvent(),this.listenSwitchEvent(),this.listenSigninEvent(),this.listenSignupEvent(),this.listenImageCaptchaEvent(),this.listentSmsCaptchaEvent()},Auth.prototype.showEvent=function(){this.maskWrapper.show()},Auth.prototype.hideEvent=function(){this.maskWrapper.hide()},Auth.prototype.listenShowHideEvent=function(){var t=this,n=$(".signin-btn"),e=$(".signup-btn"),a=$(".close-btn");n.click(function(){t.showEvent(),t.scrollWrapper.css({left:0})}),e.click(function(){t.showEvent(),t.scrollWrapper.css({left:-400})}),a.click(function(){t.hideEvent()})},Auth.prototype.listenSwitchEvent=function(){var a=this;$(".switch").click(function(){var t=a.scrollWrapper.width(),n=parseFloat(t)/2,e=a.scrollWrapper.css("left");(e=parseFloat(e))<0?a.scrollWrapper.animate({left:0},500):a.scrollWrapper.animate({left:-n},500)})},Auth.prototype.listenImageCaptchaEvent=function(){var t=$(".img-captcha");t.click(function(){t.attr("src","/account/img_captcha/?random="+Math.random())})},Auth.prototype.smsSuccessEvent=function(){var t=this;messageBox.showSuccess("短信验证码发送成功！"),t.smsCaptcha.addClass("disabled");var n=60;t.smsCaptcha.unbind();var e=setInterval(function(){t.smsCaptcha.text(n+"s"),--n<=0&&(clearInterval(e),t.smsCaptcha.removeClass("disabled"),t.smsCaptcha.text("发送验证码"),t.listentSmsCaptchaEvent())},1e3)},Auth.prototype.listentSmsCaptchaEvent=function(){var n=this,e=$(".signup-group input[name='telephone']");n.smsCaptcha.click(function(){var t=e.val();t||messageBox.showInfo("请输入手机号码"),xfzajax.get({url:"/account/sms_captcha/",data:{telephone:t},success:function(t){200===t.code&&n.smsSuccessEvent()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSigninEvent=function(){var a=this,t=$(".signin-group"),s=t.find("input[name='telephone']"),i=t.find("input[name='password']"),o=t.find("input[name='remember']");t.find(".submit-btn").click(function(){var t=s.val(),n=i.val(),e=o.prop("checked");xfzajax.post({url:"/account/login/",data:{telephone:t,password:n,remember:e?1:0},success:function(t){a.hideEvent(),window.location.reload()},fail:function(t){console.log(t)}})})},Auth.prototype.listenSignupEvent=function(){var t=$(".signup-group"),c=t.find("input[name='telephone']"),r=t.find("input[name='username']"),p=t.find("input[name='img_captcha']"),u=t.find("input[name='password1']"),l=t.find("input[name='password2']"),h=t.find("input[name='sms_captcha']");t.find(".submit-btn").click(function(t){t.preventDefault();var n=c.val(),e=r.val(),a=p.val(),s=u.val(),i=l.val(),o=h.val();xfzajax.post({url:"/account/register/",data:{telephone:n,username:e,img_captcha:a,password1:s,password2:i,sms_captcha:o},success:function(t){200===t.code&&window.location.reload()},fail:function(t){console.log(t)}})})},$(function(){(new Auth).run()}),$(function(){(new FrontBase).run()}),$(function(){window.template&&(template.defaults.imports.timeSince=function(t){var n=new Date(t),e=n.getTime(),a=((new Date).getTime()-e)/1e3;return a<60?"刚刚":60<=a&&a<3600?(minutes=parseInt(a/60),minutes+"分钟前"):3600<=a&&a<86400?(hours=parseInt(a/60/60),hours+"小时前"):86400<=a&&a<2592e3?(days=parseInt(a/60/60/24),days+"天前"):n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDay()+"/ "+n.getHours()+":"+n.getMinutes()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyb250X2Jhc2UuanMiXSwibmFtZXMiOlsiRnJvbnRCYXNlIiwiQXV0aCIsInNlbGYiLCJ0aGlzIiwibWFza1dyYXBwZXIiLCIkIiwic2Nyb2xsV3JhcHBlciIsInNtc0NhcHRjaGEiLCJwcm90b3R5cGUiLCJydW4iLCJsaXN0ZW5BdXRoSG92ZXIiLCJhdXRoQm94IiwidXNlck1vcmVCb3giLCJob3ZlciIsInNob3ciLCJoaWRlIiwibGlzdGVuU2hvd0hpZGVFdmVudCIsImxpc3RlblN3aXRjaEV2ZW50IiwibGlzdGVuU2lnbmluRXZlbnQiLCJsaXN0ZW5TaWdudXBFdmVudCIsImxpc3RlbkltYWdlQ2FwdGNoYUV2ZW50IiwibGlzdGVudFNtc0NhcHRjaGFFdmVudCIsInNob3dFdmVudCIsImhpZGVFdmVudCIsInNpZ25pbkJ0biIsInNpZ251cEJ0biIsImNsb3NlQnRuIiwiY2xpY2siLCJjc3MiLCJsZWZ0Iiwic2Nyb2xsV3JhcHBlcldpZHRoIiwid2lkdGgiLCJoYWxmV2lkdGgiLCJwYXJzZUZsb2F0IiwiY3VycmVudExlZnQiLCJhbmltYXRlIiwiaW1nQ2FwdGNoYSIsImF0dHIiLCJNYXRoIiwicmFuZG9tIiwic21zU3VjY2Vzc0V2ZW50IiwibWVzc2FnZUJveCIsInNob3dTdWNjZXNzIiwiYWRkQ2xhc3MiLCJjb3VudCIsInVuYmluZCIsInRpbWVyIiwic2V0SW50ZXJ2YWwiLCJ0ZXh0IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUNsYXNzIiwidGVsZXBob25lSW5wdXQiLCJ0ZWxlcGhvbmUiLCJ2YWwiLCJzaG93SW5mbyIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwic3VjY2VzcyIsInJlc3VsdCIsImZhaWwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzaWduaW5Hcm91cCIsImZpbmQiLCJwYXNzd29yZElucHV0IiwicmVtZW1iZXJJbnB1dCIsInBhc3N3b3JkIiwicmVtZW1iZXIiLCJwcm9wIiwicG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwic2lnbnVwR3JvdXAiLCJ1c2VybmFtZUlucHV0IiwiaW1nQ2FwdGNoYUlucHV0IiwicGFzc3dvcmQxSW5wdXQiLCJwYXNzd29yZDJJbnB1dCIsInNtc0NhcHRjaGFJbnB1dCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VybmFtZSIsImltZ19jYXB0Y2hhIiwicGFzc3dvcmQxIiwicGFzc3dvcmQyIiwic21zX2NhcHRjaGEiLCJ0ZW1wbGF0ZSIsImRlZmF1bHRzIiwiaW1wb3J0cyIsInRpbWVTaW5jZSIsImRhdGVWYWx1ZSIsImRhdGUiLCJEYXRlIiwiZGF0ZXRzIiwiZ2V0VGltZSIsInRpbWVzdGFtcCIsIm1pbnV0ZXMiLCJwYXJzZUludCIsImhvdXJzIiwiZGF5cyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXkiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLGFBa0JULFNBQVNDLE9BQ0wsSUFBSUMsRUFBT0MsS0FDWEQsRUFBS0UsWUFBY0MsRUFBRSxpQkFDckJILEVBQUtJLGNBQWdCRCxFQUFFLG1CQUN2QkgsRUFBS0ssV0FBYUYsRUFBRSxvQkFsQnhCTCxVQUFVUSxVQUFVQyxJQUFNLFdBQ3RCTixLQUFLTyxtQkFFVFYsVUFBVVEsVUFBVUUsZ0JBQWtCLFdBQ2xDLElBQUlDLEVBQVVOLEVBQUUsYUFDWk8sRUFBY1AsRUFBRSxrQkFDcEJNLEVBQVFFLE1BQU0sV0FDVkQsRUFBWUUsUUFDYixXQUNDRixFQUFZRyxVQVlwQmQsS0FBS08sVUFBVUMsSUFBTSxXQUNqQk4sS0FBS2Esc0JBQ0xiLEtBQUtjLG9CQUNMZCxLQUFLZSxvQkFDTGYsS0FBS2dCLG9CQUNMaEIsS0FBS2lCLDBCQUNMakIsS0FBS2tCLDBCQUVUcEIsS0FBS08sVUFBVWMsVUFBWSxXQUNabkIsS0FDTkMsWUFBWVUsUUFFckJiLEtBQUtPLFVBQVVlLFVBQVksV0FDWnBCLEtBQ05DLFlBQVlXLFFBRXJCZCxLQUFLTyxVQUFVUSxvQkFBc0IsV0FD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ImZpbGUiOiJmcm9udF9iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEZyb250QmFzZSgpIHtcclxuXHJcbn1cclxuXHJcbkZyb250QmFzZS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BdXRoSG92ZXIoKTtcclxufVxyXG5Gcm9udEJhc2UucHJvdG90eXBlLmxpc3RlbkF1dGhIb3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhdXRoQm94ID0gJChcIi5hdXRoLWJveFwiKTtcclxuICAgIHZhciB1c2VyTW9yZUJveCA9ICQoXCIudXNlci1tb3JlLWJveFwiKTtcclxuICAgIGF1dGhCb3guaG92ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHVzZXJNb3JlQm94LnNob3coKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB1c2VyTW9yZUJveC5oaWRlKCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gQXV0aCgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHNlbGYubWFza1dyYXBwZXIgPSAkKFwiLm1hc2std3JhcHBlclwiKTtcclxuICAgIHNlbGYuc2Nyb2xsV3JhcHBlciA9ICQoXCIuc2Nyb2xsLXdyYXBwZXJcIik7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEgPSAkKFwiLnNtcy1jYXB0Y2hhLWJ0blwiKTtcclxufVxyXG5cclxuQXV0aC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5TaG93SGlkZUV2ZW50KClcclxuICAgIHRoaXMubGlzdGVuU3dpdGNoRXZlbnQoKVxyXG4gICAgdGhpcy5saXN0ZW5TaWduaW5FdmVudCgpXHJcbiAgICB0aGlzLmxpc3RlblNpZ251cEV2ZW50KClcclxuICAgIHRoaXMubGlzdGVuSW1hZ2VDYXB0Y2hhRXZlbnQoKVxyXG4gICAgdGhpcy5saXN0ZW50U21zQ2FwdGNoYUV2ZW50KClcclxufVxyXG5BdXRoLnByb3RvdHlwZS5zaG93RXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyLnNob3coKTtcclxufVxyXG5BdXRoLnByb3RvdHlwZS5oaWRlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLm1hc2tXcmFwcGVyLmhpZGUoKTtcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaG93SGlkZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHNpZ25pbkJ0biA9ICQoXCIuc2lnbmluLWJ0blwiKTtcclxuICAgIHZhciBzaWdudXBCdG4gPSAkKFwiLnNpZ251cC1idG5cIik7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSAkKFwiLmNsb3NlLWJ0blwiKTtcclxuICAgIHNpZ25pbkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zaG93RXZlbnQoKVxyXG4gICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5jc3Moe1wibGVmdFwiOiAwfSlcclxuICAgIH0pXHJcblxyXG4gICAgc2lnbnVwQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLnNob3dFdmVudCgpXHJcbiAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyh7XCJsZWZ0XCI6IC00MDB9KVxyXG4gICAgfSlcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5oaWRlRXZlbnQoKVxyXG4gICAgfSlcclxufVxyXG4vLyBBdXRoLnByb3RvdHlwZS5saXN0ZW5Td2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuLy8gICAgIHZhciBzZWxmID0gdGhpcztcclxuLy8gICAgIHZhciBzd2l0Y2hlciA9ICQoXCIuc3dpdGNoXCIpO1xyXG4vLyAgICAgc3dpdGNoZXIuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIHZhciBjdXJyZW50TGVmdCA9IHNlbGYuc2Nyb2xsV3JhcHBlci5jc3MoXCJsZWZ0XCIpO1xyXG4vLyAgICAgICAgIGN1cnJlbnRMZWZ0ID0gcGFyc2VJbnQoY3VycmVudExlZnQpO1xyXG4vLyAgICAgICAgIGlmKGN1cnJlbnRMZWZ0IDwgMCl7XHJcbi8vICAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcImxlZnRcIjonMCd9KTtcclxuLy8gICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgICAgc2VsZi5zY3JvbGxXcmFwcGVyLmFuaW1hdGUoe1wibGVmdFwiOlwiLTQwMHB4XCJ9KTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gfTtcclxuQXV0aC5wcm90b3R5cGUubGlzdGVuU3dpdGNoRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgc3dpdGNoZXIgPSAkKFwiLnN3aXRjaFwiKTtcclxuICAgIHN3aXRjaGVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2Nyb2xsV3JhcHBlcldpZHRoID0gc2VsZi5zY3JvbGxXcmFwcGVyLndpZHRoKCk7XHJcbiAgICAgICAgdmFyIGhhbGZXaWR0aCA9IHBhcnNlRmxvYXQoc2Nyb2xsV3JhcHBlcldpZHRoKSAvIDI7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRMZWZ0ID0gc2VsZi5zY3JvbGxXcmFwcGVyLmNzcyhcImxlZnRcIik7XHJcbiAgICAgICAgY3VycmVudExlZnQgPSBwYXJzZUZsb2F0KGN1cnJlbnRMZWZ0KTtcclxuICAgICAgICBpZiAoY3VycmVudExlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgIHNlbGYuc2Nyb2xsV3JhcHBlci5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAwXHJcbiAgICAgICAgICAgIH0sIDUwMClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLnNjcm9sbFdyYXBwZXIuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogLWhhbGZXaWR0aFxyXG4gICAgICAgICAgICB9LCA1MDApXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5JbWFnZUNhcHRjaGFFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBpbWdDYXB0Y2hhID0gJChcIi5pbWctY2FwdGNoYVwiKTtcclxuICAgIGltZ0NhcHRjaGEuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltZ0NhcHRjaGEuYXR0cihcInNyY1wiLCBcIi9hY2NvdW50L2ltZ19jYXB0Y2hhLz9yYW5kb209XCIgKyBNYXRoLnJhbmRvbSgpKTtcclxuICAgIH0pXHJcbn1cclxuQXV0aC5wcm90b3R5cGUuc21zU3VjY2Vzc0V2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgbWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIuefreS/oemqjOivgeeggeWPkemAgeaIkOWKn++8gVwiKVxyXG4gICAgc2VsZi5zbXNDYXB0Y2hhLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgdmFyIGNvdW50ID0gNjA7XHJcbiAgICBzZWxmLnNtc0NhcHRjaGEudW5iaW5kKCk7XHJcbiAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoY291bnQgKyAncycpO1xyXG4gICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgaWYgKGNvdW50IDw9IDApIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHNlbGYuc21zQ2FwdGNoYS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgc2VsZi5zbXNDYXB0Y2hhLnRleHQoXCLlj5HpgIHpqozor4HnoIFcIik7XHJcbiAgICAgICAgICAgIHNlbGYubGlzdGVudFNtc0NhcHRjaGFFdmVudCgpXHJcbiAgICAgICAgfVxyXG4gICAgfSwgMTAwMClcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW50U21zQ2FwdGNoYUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gJChcIi5zaWdudXAtZ3JvdXAgaW5wdXRbbmFtZT0ndGVsZXBob25lJ11cIilcclxuICAgIHNlbGYuc21zQ2FwdGNoYS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpXHJcbiAgICAgICAgaWYgKCF0ZWxlcGhvbmUpIHtcclxuICAgICAgICAgICAgbWVzc2FnZUJveC5zaG93SW5mbyhcIuivt+i+k+WFpeaJi+acuuWPt+eggVwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiBcIi9hY2NvdW50L3Ntc19jYXB0Y2hhL1wiLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIFwidGVsZXBob25lXCI6IHRlbGVwaG9uZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zbXNTdWNjZXNzRXZlbnQoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZmFpbCc6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWduaW5FdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzaWduaW5Hcm91cCA9ICQoXCIuc2lnbmluLWdyb3VwXCIpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIHBhc3N3b3JkSW5wdXQgPSBzaWduaW5Hcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ncGFzc3dvcmQnXVwiKTtcclxuICAgIHZhciByZW1lbWJlcklucHV0ID0gc2lnbmluR3JvdXAuZmluZChcImlucHV0W25hbWU9J3JlbWVtYmVyJ11cIik7XHJcblxyXG4gICAgdmFyIHN1Ym1pdEJ0biA9IHNpZ25pbkdyb3VwLmZpbmQoXCIuc3VibWl0LWJ0blwiKTtcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbGVwaG9uZSA9IHRlbGVwaG9uZUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZCA9IHBhc3N3b3JkSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHJlbWVtYmVyID0gcmVtZW1iZXJJbnB1dC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IFwiL2FjY291bnQvbG9naW4vXCIsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RlbGVwaG9uZSc6IHRlbGVwaG9uZSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgJ3JlbWVtYmVyJzogcmVtZW1iZXIgPyAxIDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaGlkZUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2ZhaWwnOiBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5BdXRoLnByb3RvdHlwZS5saXN0ZW5TaWdudXBFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzaWdudXBHcm91cCA9ICQoXCIuc2lnbnVwLWdyb3VwXCIpO1xyXG4gICAgdmFyIHRlbGVwaG9uZUlucHV0ID0gc2lnbnVwR3JvdXAuZmluZChcImlucHV0W25hbWU9J3RlbGVwaG9uZSddXCIpO1xyXG4gICAgdmFyIHVzZXJuYW1lSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0ndXNlcm5hbWUnXVwiKTtcclxuICAgIHZhciBpbWdDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0naW1nX2NhcHRjaGEnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZDFJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDEnXVwiKTtcclxuICAgIHZhciBwYXNzd29yZDJJbnB1dCA9IHNpZ251cEdyb3VwLmZpbmQoXCJpbnB1dFtuYW1lPSdwYXNzd29yZDInXVwiKTtcclxuICAgIHZhciBzbXNDYXB0Y2hhSW5wdXQgPSBzaWdudXBHcm91cC5maW5kKFwiaW5wdXRbbmFtZT0nc21zX2NhcHRjaGEnXVwiKTtcclxuICAgIHZhciBzdWJtaXRCdG4gPSBzaWdudXBHcm91cC5maW5kKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgdGVsZXBob25lID0gdGVsZXBob25lSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXJuYW1lID0gdXNlcm5hbWVJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgaW1nX2NhcHRjaGEgPSBpbWdDYXB0Y2hhSW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIHBhc3N3b3JkMSA9IHBhc3N3b3JkMUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBwYXNzd29yZDIgPSBwYXNzd29yZDJJbnB1dC52YWwoKTtcclxuICAgICAgICB2YXIgc21zX2NhcHRjaGEgPSBzbXNDYXB0Y2hhSW5wdXQudmFsKCk7XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2FjY291bnQvcmVnaXN0ZXIvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiB7XHJcbiAgICAgICAgICAgICAgICAndGVsZXBob25lJzogdGVsZXBob25lLFxyXG4gICAgICAgICAgICAgICAgJ3VzZXJuYW1lJzogdXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAnaW1nX2NhcHRjaGEnOiBpbWdfY2FwdGNoYSxcclxuICAgICAgICAgICAgICAgICdwYXNzd29yZDEnOiBwYXNzd29yZDEsXHJcbiAgICAgICAgICAgICAgICAncGFzc3dvcmQyJzogcGFzc3dvcmQyLFxyXG4gICAgICAgICAgICAgICAgJ3Ntc19jYXB0Y2hhJzogc21zX2NhcHRjaGFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdmYWlsJzogZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pXHJcbn1cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYXV0aCA9IG5ldyBBdXRoKCk7XHJcbiAgICBhdXRoLnJ1bigpO1xyXG59KVxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZnJvbnRCYXNlID0gbmV3IEZyb250QmFzZSgpXHJcbiAgICBmcm9udEJhc2UucnVuKCk7XHJcbn0pXHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh3aW5kb3cudGVtcGxhdGUpIHtcclxuICAgICAgICB0ZW1wbGF0ZS5kZWZhdWx0cy5pbXBvcnRzLnRpbWVTaW5jZSA9IGZ1bmN0aW9uIChkYXRlVmFsdWUpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlVmFsdWUpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZXRzID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIHZhciBub3d0cyA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSAobm93dHMgLSBkYXRldHMpIC8gMTAwMDtcclxuICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ+WImuWImidcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCkge1xyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IHBhcnNlSW50KHRpbWVzdGFtcCAvIDYwKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJztcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPj0gNjAgKiA2MCAmJiB0aW1lc3RhbXAgPCA2MCAqIDYwICogMjQpIHtcclxuICAgICAgICAgICAgICAgIGhvdXJzID0gcGFyc2VJbnQodGltZXN0YW1wIC8gNjAgLyA2MClcclxuICAgICAgICAgICAgICAgIHJldHVybiBob3VycyArICflsI/ml7bliY0nO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+PSA2MCAqIDYwICogMjQgJiYgdGltZXN0YW1wIDwgNjAgKiA2MCAqIDI0ICogMzApIHtcclxuICAgICAgICAgICAgICAgIGRheXMgPSBwYXJzZUludCh0aW1lc3RhbXAgLyA2MCAvIDYwIC8gMjQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF5cyArICflpKnliY0nO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHllYXIgKyAnLycgKyAobW9udGggKyAxKSArICcvJyArIGRheSArICcvJyArIFwiIFwiICsgaG91ciArIFwiOlwiICsgbWludXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufSkiXX0=
