function NewsList(){}NewsList.prototype.run=function(){this.listenSubmitEvent(),this.listenCommentLengthEvent()},NewsList.prototype.listenCommentLengthEvent=function(){var t=$("#comment-length"),e=$(".comment-list li").length;t.html(e)},NewsList.prototype.listenSubmitEvent=function(){var s=this,n=$(".submit-btn"),i=$("textarea[name='comment']");n.click(function(){var t=i.val(),e=n.attr("data-news-id");xfzajax.post({url:"/news/public_comment/",data:{content:t,news_id:e},success:function(t){if(200===t.code){var e=t.data,n=template("comment-item",{comment:e});$(".comment-list").prepend(n),window.messageBox.showSuccess("评论发表成功!"),i.val(""),s.listenCommentLengthEvent()}else window.messageBox.showError(t.message)}})})},$(function(){(new NewsList).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3NfZGV0YWlsLmpzIl0sIm5hbWVzIjpbIk5ld3NMaXN0IiwicHJvdG90eXBlIiwicnVuIiwidGhpcyIsImxpc3RlblN1Ym1pdEV2ZW50IiwibGlzdGVuQ29tbWVudExlbmd0aEV2ZW50IiwiY29tbWVudExlbmd0aCIsIiQiLCJsZW4iLCJsZW5ndGgiLCJodG1sIiwic2VsZiIsInN1Ym1pdEJ0biIsInRleHRBcmVhSW5wdXQiLCJjbGljayIsImNvbnRlbnQiLCJ2YWwiLCJuZXdzX2lkIiwiYXR0ciIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb21tZW50IiwidHBsIiwidGVtcGxhdGUiLCJwcmVwZW5kIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dTdWNjZXNzIiwic2hvd0Vycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxZQUlUQSxTQUFTQyxVQUFVQyxJQUFNLFdBQ3JCQyxLQUFLQyxvQkFDTEQsS0FBS0UsNEJBR1RMLFNBQVNDLFVBQVVJLHlCQUEyQixXQUMxQyxJQUFJQyxFQUFnQkMsRUFBRSxtQkFFakJDLEVBRG1CRCxFQUFFLG9CQUNFRSxPQUMzQkgsRUFBY0ksS0FBS0YsSUFHeEJSLFNBQVNDLFVBQVVHLGtCQUFvQixXQUNuQyxJQUFJTyxFQUFPUixLQUNQUyxFQUFZTCxFQUFFLGVBQ2RNLEVBQWdCTixFQUFFLDRCQUN0QkssRUFBVUUsTUFBTSxXQUNaLElBQUlDLEVBQVVGLEVBQWNHLE1BQ3hCQyxFQUFVTCxFQUFVTSxLQUFLLGdCQUM3QkMsUUFBUUMsS0FBSyxDQUNUQyxJQUFPLHdCQUNQQyxLQUFRLENBQ0pQLFFBQVdBLEVBQ1hFLFFBQVdBLEdBRWZNLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJQyxFQUFVRCxFQUFhLEtBQ3ZCRSxFQUFNQyxTQUFTLGVBQWdCLENBQUNGLFFBQVVBLElBQ3ZCbEIsRUFBRSxpQkFDUnFCLFFBQVFGLEdBQ3pCRyxPQUFPQyxXQUFXQyxZQUFZLFdBQzlCbEIsRUFBY0csSUFBSSxJQUNsQkwsRUFBS04sZ0NBRUx3QixPQUFPQyxXQUFXRSxVQUFVUixFQUFnQixlQVNoRWpCLEVBQUUsWUFDaUIsSUFBSVAsVUFDVkUiLCJmaWxlIjoibmV3c19kZXRhaWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3c0xpc3QoKSB7XHJcblxyXG59XHJcblxyXG5OZXdzTGlzdC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5TdWJtaXRFdmVudCgpO1xyXG4gICAgdGhpcy5saXN0ZW5Db21tZW50TGVuZ3RoRXZlbnQoKTtcclxufVxyXG5cclxuTmV3c0xpc3QucHJvdG90eXBlLmxpc3RlbkNvbW1lbnRMZW5ndGhFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgY29tbWVudExlbmd0aCA9ICQoXCIjY29tbWVudC1sZW5ndGhcIik7XHJcbiAgICAgdmFyIGNvbW1lbnRMaXN0R3JvdXAgPSAkKFwiLmNvbW1lbnQtbGlzdCBsaVwiKTtcclxuICAgICB2YXIgbGVuID0gY29tbWVudExpc3RHcm91cC5sZW5ndGg7XHJcbiAgICAgY29tbWVudExlbmd0aC5odG1sKGxlbik7XHJcbn1cclxuXHJcbk5ld3NMaXN0LnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKFwiLnN1Ym1pdC1idG5cIik7XHJcbiAgICB2YXIgdGV4dEFyZWFJbnB1dCA9ICQoXCJ0ZXh0YXJlYVtuYW1lPSdjb21tZW50J11cIilcclxuICAgIHN1Ym1pdEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSB0ZXh0QXJlYUlucHV0LnZhbCgpO1xyXG4gICAgICAgIHZhciBuZXdzX2lkID0gc3VibWl0QnRuLmF0dHIoXCJkYXRhLW5ld3MtaWRcIik7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6IFwiL25ld3MvcHVibGljX2NvbW1lbnQvXCIsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgJ25ld3NfaWQnOiBuZXdzX2lkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJjb21tZW50LWl0ZW1cIiwge1wiY29tbWVudFwiOmNvbW1lbnR9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudExpc3RHcm91cCA9ICQoXCIuY29tbWVudC1saXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbW1lbnRMaXN0R3JvdXAucHJlcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi6K+E6K665Y+R6KGo5oiQ5YqfIVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRBcmVhSW5wdXQudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RlbkNvbW1lbnRMZW5ndGhFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKHJlc3VsdFsnbWVzc2FnZSddKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG5ld3NMaXN0ID0gbmV3IE5ld3NMaXN0KCk7XHJcbiAgICBuZXdzTGlzdC5ydW4oKTtcclxufSkiXX0=
