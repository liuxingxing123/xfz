function Banners(){}Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除才成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find(".priority-box"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsInJ1biIsInRoaXMiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImxvYWREYXRhIiwic2VsZiIsIiQiLCJjbGljayIsImNoaWxkcmVuIiwibGVuZ3RoIiwid2luZG93IiwibWVzc2FnZUJveCIsInNob3dJbmZvIiwiY3JlYXRlQmFubmVySXRlbSIsImFkZEltYWdlU2VsZWN0RXZlbnQiLCJiYW5uZXJJdGVtIiwiaW1hZ2UiLCJmaW5kIiwiaW1hZ2VJbnB1dCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsImF0dHIiLCJhZGRSZW1vdmVCYW5uZXJFdmVudCIsImJhbm5lcklkIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJzYXZlQnRuIiwicHJpb3JpdHlJbnB1dCIsImxpbmt0b0lucHV0IiwicHJpb3JpdHlTcGFuIiwiaW1hZ2VfdXJsIiwicHJpb3JpdHkiLCJ2YWwiLCJsaW5rX3RvIiwicGsiLCJnZXQiLCJiYW5uZXJzIiwiaSIsImJhbm5lciIsInRwbCIsInRlbXBsYXRlIiwiYmFubmVyTGlzdEdyb3VwIiwicHJlcGVuZCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsV0FJVEEsUUFBUUMsVUFBVUMsSUFBTSxXQUNwQkMsS0FBS0MsdUJBQ0xELEtBQUtFLFlBR1RMLFFBQVFDLFVBQVVHLHFCQUF1QixXQUNyQyxJQUFJRSxFQUFPSCxLQUNRSSxFQUFFLG1CQUNSQyxNQUFNLFdBR0YsR0FGU0QsRUFBRSxzQkFDS0UsV0FBV0MsT0FFcENDLE9BQU9DLFdBQVdDLFNBQVMsZ0JBRy9CUCxFQUFLUSxzQkFJYmQsUUFBUUMsVUFBVWMsb0JBQXNCLFNBQVVDLEdBQzlDLElBQUlDLEVBQVFELEVBQVdFLEtBQUssY0FDeEJDLEVBQWFILEVBQVdFLEtBQUssZ0JBQ2pDRCxFQUFNVCxNQUFNLFdBQ1JXLEVBQVdYLFVBR2ZXLEVBQVdDLE9BQU8sV0FDZCxJQUFJQyxFQUFPbEIsS0FBS21CLE1BQU0sR0FDbEJDLEVBQVcsSUFBSUMsU0FDbkJELEVBQVNFLE9BQU8sT0FBUUosR0FDeEJLLFFBQVFDLEtBQUssQ0FDVEMsSUFBTyxvQkFDUEMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBVUMsR0FDakIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJTCxFQUFNSyxFQUFhLEtBQU8sSUFDOUJoQixFQUFNaUIsS0FBSyxNQUFPTixVQVF0QzVCLFFBQVFDLFVBQVVrQyxxQkFBdUIsU0FBVW5CLEdBQ2hDQSxFQUFXRSxLQUFLLGNBQ3RCVixNQUFNLFdBQ1gsSUFBSTRCLEVBQVdwQixFQUFXa0IsS0FBSyxrQkFDM0JFLEVBQ0FDLFNBQVNDLGFBQWEsQ0FDbEJDLEtBQVEsZ0JBQ1JDLGdCQUFtQixXQUNmZCxRQUFRQyxLQUFLLENBQ1RDLElBQU8sc0JBQ1BDLEtBQVEsQ0FDSlksVUFBYUwsR0FFakJKLFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxPQUNiakIsRUFBVzBCLFNBQ1gvQixPQUFPQyxXQUFXK0IsWUFBWSxvQkFPbEQzQixFQUFXMEIsWUFPdkIxQyxRQUFRQyxVQUFVMkMsbUJBQXFCLFNBQVU1QixHQUM3QyxJQUFJNkIsRUFBVTdCLEVBQVdFLEtBQUssYUFDMUJELEVBQVFELEVBQVdFLEtBQUssY0FDeEI0QixFQUFnQjlCLEVBQVdFLEtBQUssMEJBQ2hDNkIsRUFBYy9CLEVBQVdFLEtBQUsseUJBQzlCOEIsRUFBZWhDLEVBQVdFLEtBQUssaUJBQy9Ca0IsRUFBV3BCLEVBQVdrQixLQUFLLGtCQUMzQk4sRUFBTSxHQUVOQSxFQURBUSxFQUNNLG9CQUVBLG1CQUVWUyxFQUFRckMsTUFBTSxXQUNWLElBQUl5QyxFQUFZaEMsRUFBTWlCLEtBQUssT0FDdkJnQixFQUFXSixFQUFjSyxNQUN6QkMsRUFBVUwsRUFBWUksTUFDMUJ6QixRQUFRQyxLQUFLLENBQ1RDLElBQU9BLEVBQ1BDLEtBQVEsQ0FDSm9CLFVBQWFBLEVBQ2JDLFNBQVlBLEVBQ1pFLFFBQVdBLEVBQ1hDLEdBQU1qQixHQUVWSixRQUFXLFNBQVVDLEdBQ00sTUFBbkJBLEVBQWEsT0FDVEcsRUFDQXpCLE9BQU9DLFdBQVcrQixZQUFZLGFBRTlCUCxFQUFXSCxFQUFhLEtBQWEsVUFDckNqQixFQUFXa0IsS0FBSyxpQkFBa0JFLEdBQ2xDekIsT0FBT0MsV0FBVytCLFlBQVksYUFFbENLLEVBQWFULEtBQUssT0FBU1csVUFPL0NsRCxRQUFRQyxVQUFVSSxTQUFXLFdBQ3pCLElBQUlDLEVBQU9ILEtBQ1h1QixRQUFRNEIsSUFBSSxDQUNSMUIsSUFBTyxvQkFDUEksUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUViLElBREEsSUFBSXNCLEVBQVV0QixFQUFhLEtBQ2xCdUIsRUFBSSxFQUFHQSxFQUFJRCxFQUFRN0MsT0FBUThDLElBQUssQ0FDckMsSUFBSUMsRUFBU0YsRUFBUUMsR0FDckJsRCxFQUFLUSxpQkFBaUIyQyxRQU8xQ3pELFFBQVFDLFVBQVVhLGlCQUFtQixTQUFVMkMsR0FDM0MsSUFBSW5ELEVBQU9ILEtBQ1B1RCxFQUFNQyxTQUFTLGNBQWUsQ0FBQ0YsT0FBVUEsSUFDekNHLEVBQWtCckQsRUFBRSxzQkFDcEJTLEVBQWEsS0FHYkEsRUFGQXlDLEdBQ0FHLEVBQWdCbkMsT0FBT2lDLEdBQ1ZFLEVBQWdCMUMsS0FBSyx1QkFFbEMwQyxFQUFnQkMsUUFBUUgsR0FDWEUsRUFBZ0IxQyxLQUFLLHVCQUV0Q1osRUFBS1Msb0JBQW9CQyxHQUN6QlYsRUFBSzZCLHFCQUFxQm5CLEdBQzFCVixFQUFLc0MsbUJBQW1CNUIsSUFFNUJULEVBQUUsWUFDZ0IsSUFBSVAsU0FDVkUiLCJmaWxlIjoiYmFubmVycy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXJzKCkge1xyXG5cclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5BZGRCYW5uZXJFdmVudCgpXHJcbiAgICB0aGlzLmxvYWREYXRhKClcclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQmFubmVyQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcclxuICAgIGFkZEJhbm5lckJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYobGVuZ3RoID49IDYpe1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbygn5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvu+8gScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xyXG4gICAgfSlcclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkSW1hZ2VTZWxlY3RFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpO1xyXG4gICAgaW1hZ2UuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGltYWdlSW5wdXQuY2xpY2soKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcclxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgJ3Byb2Nlc3NEYXRhJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSlcclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIGNsb3NlQnRuID0gYmFubmVySXRlbS5maW5kKCcuY2xvc2UtYnRuJyk7XHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICAndGV4dCc6IFwi5oKo56Gu5a6a6KaB5Yig6Zmk6L+Z5Liq6L2u5pKt5Zu+5ZCXP1wiLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5Yig6Zmk5omN5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIHNhdmVCdG4gPSBiYW5uZXJJdGVtLmZpbmQoXCIuc2F2ZS1idG5cIik7XHJcbiAgICB2YXIgaW1hZ2UgPSBiYW5uZXJJdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIHByaW9yaXR5SW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGxpbmt0b0lucHV0ID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0nbGlua190byddXCIpO1xyXG4gICAgdmFyIHByaW9yaXR5U3BhbiA9IGJhbm5lckl0ZW0uZmluZChcIi5wcmlvcml0eS1ib3hcIik7XHJcbiAgICB2YXIgYmFubmVySWQgPSBiYW5uZXJJdGVtLmF0dHIoXCJkYXRhLWJhbm5lci1pZFwiKTtcclxuICAgIHZhciB1cmwgPSAnJztcclxuICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2VkaXRfYmFubmVyLyc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJztcclxuICAgIH1cclxuICAgIHNhdmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbWFnZV91cmwgPSBpbWFnZS5hdHRyKFwic3JjXCIpO1xyXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXR5SW5wdXQudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rdG9JbnB1dC52YWwoKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICdpbWFnZV91cmwnOiBpbWFnZV91cmwsXHJcbiAgICAgICAgICAgICAgICAncHJpb3JpdHknOiBwcmlvcml0eSxcclxuICAgICAgICAgICAgICAgICdsaW5rX3RvJzogbGlua190byxcclxuICAgICAgICAgICAgICAgICdwayc6IGJhbm5lcklkXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuS/ruaUueaIkOWKn++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcklkID0gcmVzdWx0WydkYXRhJ11bJ2Jhbm5lcl9pZCddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoJ2RhdGEtYmFubmVyLWlkJywgYmFubmVySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2Vzcygn6L2u5pKt5Zu+5re75Yqg5a6M5oiQ77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6ICcvY21zL2Jhbm5lcl9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFubmVycyA9IHJlc3VsdFsnZGF0YSddXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhbm5lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyID0gYmFubmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbkJhbm5lcnMucHJvdG90eXBlLmNyZWF0ZUJhbm5lckl0ZW0gPSBmdW5jdGlvbiAoYmFubmVyKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJiYW5uZXItaXRlbVwiLCB7XCJiYW5uZXJcIjogYmFubmVyfSk7XHJcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJChcIi5iYW5uZXItbGlzdC1ncm91cFwiKTtcclxuICAgIHZhciBiYW5uZXJJdGVtID0gbnVsbDtcclxuICAgIGlmIChiYW5uZXIpIHtcclxuICAgICAgICBiYW5uZXJMaXN0R3JvdXAuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmxhc3RcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmZpcnN0XCIpO1xyXG4gICAgfVxyXG4gICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRSZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG59XHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lcnMgPSBuZXcgQmFubmVycygpO1xyXG4gICAgYmFubmVycy5ydW4oKTtcclxufSkiXX0=
