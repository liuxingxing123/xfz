function Banner(){this.bannergroup=$("#banner-group"),this.timer=null,this.index=1,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.bannerWidth=798,this.pageControl=$(".page-control")}function Index(){this.page=2,this.category_id=0,this.loadMoreBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this.liList.eq(0).clone(!0),t=this.liList.eq(this.bannerCount-1).clone(!0);this.bannerUl.append(n),this.bannerUl.prepend(t),this.bannerUl.css({width:this.bannerWidth*(this.bannerCount+2),left:-this.bannerWidth})},Banner.prototype.initControl=function(){for(var n=0;n<this.bannerCount;n++){var t=$("<li></li>");this.pageControl.append(t),0===n&&t.addClass("active")}this.pageControl.css({width:12*this.bannerCount+16+16*(this.bannerCount-1)})},Banner.prototype.toggleArrow=function(){this.leftArrow.toggle(),this.rightArrow.toggle()},Banner.prototype.run=function(){this.loop(),this.listenArrowClick(),this.initControl(),this.initBanner(),this.listenPageControl(),this.listenBannerHover()},Banner.prototype.loop=function(){var n=this;this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenPageControl=function(){var e=this;this.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n+1,e.animate()})})},Banner.prototype.animate=function(){this.bannerUl.stop().animate({left:-798*this.index},500);var n=this.index;n=0===n?this.bannerCount-1:n===this.bannerCount+1?0:this.index-1,this.pageControl.children("li").eq(n).addClass("active").siblings().removeClass("active")},Banner.prototype.listenArrowClick=function(){var n=this;this.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),this.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannergroup.hover(function(){clearInterval(n.timer),n.toggleArrow()},function(){n.loop(),n.toggleArrow()})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},Index.prototype.listenLoadMoreEvent=function(){var i=this;this.loadMoreBtn.click(function(){xfzajax.get({url:"/news/list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else i.loadMoreBtn.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var a=this;$(".list-tab").on("click","li",function(){var r=$(this),o=r.attr("data-category");xfzajax.get({url:"/news/list/",data:{category_id:o,p:1},success:function(n){if(200===n.code){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),a.page=2,a.category_id=o,r.addClass("active").siblings().removeClass("active"),a.loadMoreBtn.show()}}})})},$(function(){(new Banner).run(),(new Index).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJiYW5uZXJncm91cCIsIiQiLCJ0aW1lciIsImluZGV4IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlMaXN0IiwiY2hpbGRyZW4iLCJiYW5uZXJDb3VudCIsImxlbmd0aCIsImJhbm5lcldpZHRoIiwicGFnZUNvbnRyb2wiLCJJbmRleCIsInBhZ2UiLCJjYXRlZ29yeV9pZCIsImxvYWRNb3JlQnRuIiwicHJvdG90eXBlIiwiaW5pdEJhbm5lciIsImZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsImxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwiaW5pdENvbnRyb2wiLCJpIiwiY2lyY2xlIiwiYWRkQ2xhc3MiLCJ0b2dnbGVBcnJvdyIsInRvZ2dsZSIsInJ1biIsImxvb3AiLCJsaXN0ZW5BcnJvd0NsaWNrIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJsaXN0ZW5CYW5uZXJIb3ZlciIsInNlbGYiLCJzZXRJbnRlcnZhbCIsImFuaW1hdGUiLCJlYWNoIiwib2JqIiwiY2xpY2siLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsImxpc3RlbkxvYWRNb3JlRXZlbnQiLCJsaXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50IiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NlcyIsInRwbCIsInRlbXBsYXRlIiwiaGlkZSIsIm9uIiwibGkiLCJhdHRyIiwibmV3c0xpc3RHcm91cCIsImVtcHR5Iiwic2hvdyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsU0FDTEMsS0FBS0MsWUFBY0MsRUFBRSxpQkFDckJGLEtBQUtHLE1BQVEsS0FDYkgsS0FBS0ksTUFBUSxFQUNiSixLQUFLSyxVQUFZSCxFQUFFLGVBQ25CRixLQUFLTSxXQUFhSixF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QUFNQyxTQUFTLFlBQWEsQ0FBQ0YsT0FBVUEsSUFFdkNPLEVBQWdCakUsRUFBRSxxQkFDdEJpRSxFQUFjQyxRQUNkRCxFQUFjM0MsT0FBT3FDLEdBQ3JCckIsRUFBS3pCLEtBQU8sRUFDWnlCLEVBQUt4QixZQUFjQSxFQUNuQmlELEVBQUdqQyxTQUFTLFVBQVVlLFdBQVdDLFlBQVksVUFDN0NSLEVBQUt2QixZQUFZb0QsY0FNckNuRSxFQUFFLFlBQ2UsSUFBSUgsUUFDVm9DLE9BRUssSUFBSXJCLE9BQ1ZxQiIsImZpbGUiOiJpbmRleC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBCYW5uZXIoKSB7XHJcbiAgICB0aGlzLmJhbm5lcmdyb3VwID0gJChcIiNiYW5uZXItZ3JvdXBcIik7XHJcbiAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cgPSAkKCcubGVmdC1hcnJvdycpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJCgnLnJpZ2h0LWFycm93Jyk7XHJcbiAgICB0aGlzLmJhbm5lclVsID0gJChcIiNiYW5uZXItdWxcIik7XHJcbiAgICB0aGlzLmxpTGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oXCJsaVwiKTtcclxuICAgIHRoaXMuYmFubmVyQ291bnQgPSB0aGlzLmxpTGlzdC5sZW5ndGg7XHJcbiAgICB0aGlzLmJhbm5lcldpZHRoID0gNzk4O1xyXG4gICAgdGhpcy5wYWdlQ29udHJvbCA9ICQoXCIucGFnZS1jb250cm9sXCIpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmluaXRCYW5uZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZmlyc3RCYW5uZXIgPSB0aGlzLmxpTGlzdC5lcSgwKS5jbG9uZSh0cnVlKTtcclxuICAgIHZhciBsYXN0QmFubmVyID0gdGhpcy5saUxpc3QuZXEodGhpcy5iYW5uZXJDb3VudCAtIDEpLmNsb25lKHRydWUpO1xyXG4gICAgdGhpcy5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgdGhpcy5iYW5uZXJVbC5jc3Moe1xyXG4gICAgICAgIFwid2lkdGhcIjogdGhpcy5iYW5uZXJXaWR0aCAqICh0aGlzLmJhbm5lckNvdW50ICsgMiksXHJcbiAgICAgICAgXCJsZWZ0XCI6IC10aGlzLmJhbm5lcldpZHRoXHJcbiAgICB9KVxyXG5cclxufVxyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0Q29udHJvbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYW5uZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGNpcmNsZSA9ICQoXCI8bGk+PC9saT5cIik7XHJcbiAgICAgICAgdGhpcy5wYWdlQ29udHJvbC5hcHBlbmQoY2lyY2xlKTtcclxuICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjaXJjbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMucGFnZUNvbnRyb2wuY3NzKHtcclxuICAgICAgICBcIndpZHRoXCI6IHRoaXMuYmFubmVyQ291bnQgKiAxMiArIDggKiAyICsgMTYgKiAodGhpcy5iYW5uZXJDb3VudCAtIDEpXHJcbiAgICB9KVxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5sZWZ0QXJyb3cudG9nZ2xlKCk7XHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cudG9nZ2xlKCk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5sb29wKCk7XHJcbiAgICB0aGlzLmxpc3RlbkFycm93Q2xpY2soKTtcclxuICAgIHRoaXMuaW5pdENvbnRyb2woKTtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5saXN0ZW5QYWdlQ29udHJvbCgpO1xyXG4gICAgdGhpcy5saXN0ZW5CYW5uZXJIb3ZlcigpO1xyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID49IHNlbGYuYmFubmVyQ291bnQgKyAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHtcImxlZnRcIjogLXNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBvYmopIHtcclxuICAgICAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gaW5kZXgrMTtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYmFubmVyVWwuc3RvcCgpLmFuaW1hdGUoe1wibGVmdFwiOiAtNzk4ICogdGhpcy5pbmRleH0sIDUwMClcclxuICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICBpbmRleCA9IHRoaXMuYmFubmVyQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gdGhpcy5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gdGhpcy5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBhZ2VDb250cm9sLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKVxyXG59XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJDb3VudCAqIHNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pXHJcbiAgICB0aGlzLnJpZ2h0QXJyb3cuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmJhbm5lckNvdW50ICsgMSkge1xyXG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7XCJsZWZ0XCI6IC1zZWxmLmJhbm5lcldpZHRofSlcclxuICAgICAgICAgICAgc2VsZi5pbmRleCA9IDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lcmdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3coKTtcclxuICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmxvb3AoKTtcclxuICAgICAgICBzZWxmLnRvZ2dsZUFycm93KCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBJbmRleCgpIHtcclxuICAgIHRoaXMucGFnZSA9IDI7XHJcbiAgICB0aGlzLmNhdGVnb3J5X2lkID0gMDtcclxuICAgIHRoaXMubG9hZE1vcmVCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcblxyXG59XHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5saXN0ZW5Mb2FkTW9yZUV2ZW50KClcclxuICAgIHRoaXMubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCgpXHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5Mb2FkTW9yZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy5sb2FkTW9yZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSAyO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvbmV3cy9saXN0LycsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3AnOiBzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnlfaWQnOnNlbGYuY2F0ZWdvcnlfaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdzZXMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3c2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IHRlbXBsYXRlKFwibmV3cy1pdGVtXCIsIHsnbmV3c2VzJzogbmV3c2VzfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5saXN0LWlubmVyLWdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRNb3JlQnRuLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbkluZGV4LnByb3RvdHlwZS5saXN0ZW5DYXRlZ29yeVN3aXRjaEV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5vbignY2xpY2snLCdsaScsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5X2lkID0gbGkuYXR0cihcImRhdGEtY2F0ZWdvcnlcIik7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSAxO1xyXG4gICAgICAgIHhmemFqYXguZ2V0KHtcclxuICAgICAgICAgICAgJ3VybCc6XCIvbmV3cy9saXN0L1wiLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpjYXRlZ29yeV9pZCxcclxuICAgICAgICAgICAgICAgICdwJzpwYWdlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzpmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXT09PTIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFsnZGF0YSddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7J25ld3Nlcyc6IG5ld3Nlc30pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZW1wdHnvvJrlj6/ku6XlsIbov5nkuKrmoIfnrb7kuIvnmoTmiYDmnInlrZDlhYPntKDpg73liKDmjolcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3c0xpc3RHcm91cCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3c0xpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkTW9yZUJ0bi5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXIgPSBuZXcgQmFubmVyKCk7XHJcbiAgICBiYW5uZXIucnVuKCk7XHJcblxyXG4gICAgdmFyIGluZGV4ID0gbmV3IEluZGV4KCk7XHJcbiAgICBpbmRleC5ydW4oKTtcclxufSlcclxuIl19
